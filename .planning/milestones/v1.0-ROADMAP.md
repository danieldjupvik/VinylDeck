# Milestone v1.0: User-Friendly Changelog

**Status:** âœ… SHIPPED 2026-01-29
**Phases:** 1-3
**Total Plans:** 7

## Overview

Three-phase delivery: establish data format and version detection infrastructure, build responsive modal UI components, then integrate triggers into app flow. Each phase delivers a complete, testable capability. Research indicates all patterns are established in the codebase (HIGH confidence).

## Phases

### Phase 1: Data & Detection

**Goal**: Infrastructure for changelog data and version change detection
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:

- [x] 01-01-PLAN.md - Types, data file, and compare-versions library
- [x] 01-02-PLAN.md - Preferences store extension and useChangelog hook

**Details:**

- Created TypeScript types for ChangelogCategory, ChangelogEntry, ChangelogVersion, ChangelogData
- Installed compare-versions ^6.1.1 for proper semver comparison including prerelease support
- Extended preferences store with lastSeenVersion field and Zustand persist migration
- Created useChangelog hook with discriminated union ChangelogResult

**Requirements covered:** DATA-01, DATA-02, DATA-03, VERS-01, VERS-02, VERS-03, VERS-04

### Phase 2: Modal Components

**Goal**: Responsive changelog modal with categorized content display
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:

- [x] 02-01-PLAN.md - Install shadcn components, Badge variants, date formatter
- [x] 02-02-PLAN.md - Responsive modal wrapper and content components
- [x] 02-03-PLAN.md - Multi-version accordion and i18n translations

**Details:**

- Installed shadcn Dialog, Drawer, and Accordion components
- Extended Badge with feature (emerald), fix (amber), improvement (blue) variants
- Created formatChangelogDate utility with i18n locale mapping
- ChangelogModal renders Dialog on desktop (>=768px), Drawer on mobile (<768px)
- ChangelogEntry detects truncation and shows "Show more"/"Show less" toggle
- VersionAccordion displays multiple missed versions with latest expanded
- Complete i18n translations for English and Norwegian

**Requirements covered:** MODAL-01, MODAL-02, MODAL-03, MODAL-04, MODAL-05, CONT-01, CONT-02, CONT-03, CONT-04, CONT-05

### Phase 3: Integration

**Goal**: Modal triggers correctly in app flow and is accessible from settings
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:

- [x] 03-01-PLAN.md - Auto-trigger hook and layout integration
- [x] 03-02-PLAN.md - Settings "What's New" button and i18n

**Details:**

- Created useChangelogTrigger hook with five gates (session ref, hydration, auth, route, version)
- 750ms delay before modal appears (allows UI to settle)
- Ref guard marked true BEFORE starting timer to prevent StrictMode double-trigger
- ChangelogAutoTrigger component integrated into authenticated layout
- "What's New" button in Settings > About opens changelog modal manually

**Requirements covered:** TRIG-01, TRIG-02, TRIG-03

---

## Milestone Summary

**Decimal Phases:** None (no urgent insertions required)

**Key Decisions:**

- Translation key pattern uses underscores: `changelog.{version_underscored}.{category}_{index}`
- lastSeenVersion null means first install (no modal shown)
- ChangelogResult uses discriminated union with reason codes
- 750ms delay before modal appears (allows UI to settle)
- Ref guard set BEFORE timer starts to prevent StrictMode double-trigger
- buildEntries helper for exactOptionalPropertyTypes compatibility

**Issues Resolved:**

- Fixed Settings page partial implementation from another agent
- Fixed type mismatch between ChangelogEntry[] and string[]
- Fixed modal UX issues (focus ring, background color, button placement)

**Issues Deferred:**

- SYNC-01: Cross-tab dismissal sync (deferred to v2)

**Technical Debt Incurred:**

None. All implementations are complete without TODO/FIXME comments.

---

_For current project status, see .planning/ROADMAP.md_
