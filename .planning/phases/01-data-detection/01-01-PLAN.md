---
phase: 01-data-detection
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/changelog.ts
  - src/data/changelog.ts
  - package.json
  - bun.lock
autonomous: true

must_haves:
  truths:
    - 'Changelog types exist and are importable'
    - 'Changelog data file exports typed version entries'
    - 'compare-versions library is installed and working'
  artifacts:
    - path: 'src/types/changelog.ts'
      provides: 'ChangelogEntry and ChangelogVersion types'
      exports:
        [
          'ChangelogEntry',
          'ChangelogVersion',
          'ChangelogCategory',
          'ChangelogData'
        ]
    - path: 'src/data/changelog.ts'
      provides: 'Typed changelog entries for existing versions'
      exports: ['changelog']
  key_links:
    - from: 'src/data/changelog.ts'
      to: 'src/types/changelog.ts'
      via: 'type import'
      pattern: "import type.*from '@/types/changelog'"
---

<objective>
Create changelog data infrastructure: types, data file, and version comparison library.

Purpose: Establish the typed foundation that the useChangelog hook will consume. Without types and data, there's nothing for the detection system to work with.
Output: TypeScript types for changelog entries, a data file with sample entries, and the compare-versions library installed.
</objective>

<execution_context>
@/Users/danieldjupvik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/danieldjupvik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-data-detection/01-CONTEXT.md
@.planning/phases/01-data-detection/01-RESEARCH.md
@src/types/preferences.ts
@src/lib/constants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create changelog types and data structure</name>
  <files>src/types/changelog.ts, src/data/changelog.ts</files>
  <action>
Create `src/types/changelog.ts` with:
- `ChangelogCategory` type: `'features' | 'improvements' | 'fixes'`
- `ChangelogEntry` interface with `key: string` (translation key, supports markdown)
- `ChangelogVersion` interface with:
  - `version: string` (semver, e.g., "0.3.0-beta")
  - `date: string` (ISO format)
  - Optional arrays: `features?: ChangelogEntry[]`, `improvements?: ChangelogEntry[]`, `fixes?: ChangelogEntry[]`
- `ChangelogData` type as `ChangelogVersion[]`

Create `src/data/changelog.ts`:

- Import types from `@/types/changelog`
- Export `changelog` constant typed as `ChangelogData`
- Add entries for a placeholder version (e.g., 0.3.0-beta) with sample translation keys
- Order: newest version first
- Use translation key pattern: `changelog.{version_underscored}.{category}_{index}` (e.g., `changelog.0_3_0_beta.feature_1`)

TSDoc required on exported types. Follow existing type file patterns (see preferences.ts).
</action>
<verify>
Run `bun run build` - TypeScript compilation succeeds with no type errors.
Import test: `import { changelog } from '@/data/changelog'` resolves correctly.
</verify>
<done>
Types exported from src/types/changelog.ts.
Data file exports changelog array with at least one version entry containing features/improvements/fixes.
</done>
</task>

<task type="auto">
  <name>Task 2: Install compare-versions library</name>
  <files>package.json, bun.lock</files>
  <action>
Install compare-versions for semver comparison:
```bash
bun add compare-versions
```

This library handles:

- Numeric version comparison (0.9 < 0.10 correctly)
- Prerelease versions (0.3.0-beta < 0.3.0)
- Full semver spec compliance

No additional configuration needed. Library is TypeScript-native.
</action>
<verify>
Run `bun add compare-versions` and confirm it appears in package.json dependencies.
Test import works: create temp file with `import { compare } from 'compare-versions'` and run type check.
</verify>
<done>
compare-versions listed in package.json dependencies.
Library importable in TypeScript files.
</done>
</task>

</tasks>

<verification>
After both tasks:
1. `bun run build` completes without errors
2. `bun run lint` passes
3. Types are exported: `import type { ChangelogVersion } from '@/types/changelog'`
4. Data is exported: `import { changelog } from '@/data/changelog'`
5. Library works: `import { compare } from 'compare-versions'`
</verification>

<success_criteria>

- src/types/changelog.ts exists with ChangelogVersion, ChangelogEntry, ChangelogCategory, ChangelogData exports
- src/data/changelog.ts exists with typed changelog array containing sample entries
- compare-versions is in package.json dependencies
- `bun run build` succeeds
- `bun run lint` passes
  </success_criteria>

<output>
After completion, create `.planning/phases/01-data-detection/01-01-SUMMARY.md`
</output>
