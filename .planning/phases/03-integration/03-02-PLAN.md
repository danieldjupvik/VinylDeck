---
phase: 03-integration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/_authenticated/settings.tsx
  - public/locales/en/translation.json
  - public/locales/no/translation.json
autonomous: true

must_haves:
  truths:
    - "Settings About section has 'What's New' button that is clickable"
    - "Clicking 'What's New' opens the changelog modal"
    - 'Modal displays all changelog versions (not just new ones) when opened from Settings'
    - "Translation key 'settings.about.whatsNew' exists in both en and no locales"
  artifacts:
    - path: 'src/routes/_authenticated/settings.tsx'
      provides: 'Settings page with working changelog button'
      contains: 'setChangelogOpen'
    - path: 'public/locales/en/translation.json'
      provides: 'English translations'
      contains: 'whatsNew'
    - path: 'public/locales/no/translation.json'
      provides: 'Norwegian translations'
      contains: 'whatsNew'
  key_links:
    - from: 'src/routes/_authenticated/settings.tsx'
      to: 'src/components/changelog/changelog-modal.tsx'
      via: 'controlled modal'
      pattern: 'ChangelogModal.*open'
    - from: 'src/routes/_authenticated/settings.tsx'
      to: 'src/data/changelog.ts'
      via: 'full changelog data import'
      pattern: "import.*changelog.*from '@/data/changelog'"
---

<objective>
Add manual changelog access from Settings > About section.

Purpose: Users can revisit the changelog anytime via Settings, not just on version update. This replaces the existing "Coming soon" placeholder.

Output: Working "What's New" button in Settings that opens the changelog modal with all versions.
</objective>

<execution_context>
@/Users/danieldjupvik/.claude/get-shit-done/workflows/execute-plan.md
@/Users/danieldjupvik/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-integration/03-CONTEXT.md
@.planning/phases/03-integration/03-RESEARCH.md

@src/routes/\_authenticated/settings.tsx
@public/locales/en/translation.json
@public/locales/no/translation.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace changelog placeholder with working button in Settings</name>
  <files>src/routes/_authenticated/settings.tsx</files>
  <action>
Modify the About section to replace the disabled changelog button with a working one.

Changes:

1. Add imports at top of file:

   ```typescript
   import { useState } from 'react'
   import { ChangelogModal } from '@/components/changelog/changelog-modal'
   import { ChangelogContent } from '@/components/changelog/changelog-content'
   import { changelog } from '@/data/changelog'
   ```

   Note: useState may already be imported from elsewhere - check before adding duplicate.

2. Add state inside SettingsPage component:

   ```typescript
   const [changelogOpen, setChangelogOpen] = useState(false)
   ```

3. Replace the existing disabled changelog button (around line 381-391):

   From:

   ```tsx
   <button
     type="button"
     disabled
     className="hover:bg-accent/50 flex w-full items-center gap-3 rounded-md p-2 text-left transition-colors disabled:pointer-events-none disabled:opacity-50"
   >
     <FileText className="text-muted-foreground size-4" />
     <span className="text-sm">{t('settings.about.changelog')}</span>
     <span className="text-muted-foreground ml-auto text-xs">
       {t('common.comingSoon')}
     </span>
   </button>
   ```

   To:

   ```tsx
   <button
     type="button"
     onClick={() => setChangelogOpen(true)}
     className="hover:bg-accent/50 flex w-full items-center gap-3 rounded-md p-2 text-left transition-colors"
   >
     <FileText className="text-muted-foreground size-4" />
     <span className="text-sm">{t('settings.about.whatsNew')}</span>
   </button>
   ```

   Key changes:
   - Remove `disabled` prop
   - Remove `disabled:*` classes
   - Add `onClick` handler
   - Change translation key from `settings.about.changelog` to `settings.about.whatsNew`
   - Remove "Coming soon" span

4. Add modal render at end of component, before the final closing tags:

   ```tsx
   <ChangelogModal open={changelogOpen} onOpenChange={setChangelogOpen}>
     {changelog.length > 0 && (
       <ChangelogContent
         version={changelog[0].version}
         date={changelog[0].date}
         entries={changelog[0].entries}
         onDismiss={() => setChangelogOpen(false)}
       />
     )}
   </ChangelogModal>
   ```

   Note: For Settings, show the latest version only (same as auto-trigger). The accordion for multiple missed versions is a Phase 2 feature that applies only when showing "new since last visit" - in Settings we show just the current release notes.

Per CONTEXT.md decision: "Text link style (minimal footprint, not a button)" - the existing button styling matches this (it's styled as a text row, not a prominent button).
</action>
<verify>

```bash
# Verify imports added
grep "ChangelogModal" src/routes/_authenticated/settings.tsx
grep "changelog" src/routes/_authenticated/settings.tsx | head -5

# Verify state added
grep "changelogOpen" src/routes/_authenticated/settings.tsx

# Verify button is no longer disabled
grep -A 5 "settings.about.whatsNew" src/routes/_authenticated/settings.tsx | grep -v "disabled"

# Verify modal render
grep -A 5 "ChangelogModal.*open" src/routes/_authenticated/settings.tsx

# Type check
bun run build 2>&1 | head -20
```

  </verify>
  <done>
Settings About section has working "What's New" button. Clicking opens ChangelogModal with latest version content. Disabled state and "Coming soon" text removed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add i18n translation keys</name>
  <files>public/locales/en/translation.json, public/locales/no/translation.json</files>
  <action>
Add translation key for the "What's New" button label.

1. In `public/locales/en/translation.json`, add to `settings.about` section:

   ```json
   "about": {
     "title": "About",
     "description": "...",
     "changelog": "Changelog",
     "whatsNew": "What's New",
     ...
   }
   ```

2. In `public/locales/no/translation.json`, add to `settings.about` section:
   ```json
   "about": {
     "title": "Om",
     "description": "...",
     "changelog": "Endringslogg",
     "whatsNew": "Hva er nytt",
     ...
   }
   ```

Keep existing keys. Only add the new `whatsNew` key alongside existing `changelog` key (which may still be used elsewhere or for future purposes).
</action>
<verify>

```bash
# Verify English translation
grep "whatsNew" public/locales/en/translation.json

# Verify Norwegian translation
grep "whatsNew" public/locales/no/translation.json

# Verify JSON is valid
cat public/locales/en/translation.json | bun -e "JSON.parse(require('fs').readFileSync('/dev/stdin', 'utf8')); console.log('Valid JSON')"
cat public/locales/no/translation.json | bun -e "JSON.parse(require('fs').readFileSync('/dev/stdin', 'utf8')); console.log('Valid JSON')"
```

  </verify>
  <done>
Translation key `settings.about.whatsNew` added to both en (What's New) and no (Hva er nytt) locale files.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. `bun run build` passes
2. `bun run lint` passes
3. Manual testing:
   - Navigate to Settings page
   - About section shows "What's New" button (not disabled, no "Coming soon")
   - Click "What's New" - modal opens
   - Modal shows latest version content
   - Modal dismisses via X, Escape, or backdrop
   - Switch language to Norwegian - button shows "Hva er nytt"
     </verification>

<success_criteria>

- Settings About section has enabled "What's New" button
- Button opens ChangelogModal with latest version content
- Translation keys exist in both en and no locales
- "Coming soon" placeholder removed
- No new TypeScript or lint errors
  </success_criteria>

<output>
After completion, create `.planning/phases/03-integration/03-02-SUMMARY.md`
</output>
